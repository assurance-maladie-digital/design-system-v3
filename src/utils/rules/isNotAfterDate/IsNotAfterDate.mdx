import { Meta, Canvas, Source } from '@storybook/blocks';
import * as IsNotAfterDateStories from './IsNotAfterDate.stories';

<Meta of={IsNotAfterDateStories} />
<style>
{
`
      .header {
      padding: 2rem;
      margin-bottom: 2rem;
    }
    
    .header h1 {
      margin-top: 0;
      color:  #0c419a;;
      font-size: 2.5rem;
      font-weight: 700;
    }
    
    .header p {
      font-size: 1.1rem;
      margin-bottom: 0;
    }
    `
}
</style>

<div className="header">
  <h1>Règle de validation `isNotAfterDate`</h1>
  <p>La règle de validation `isNotAfterDate` permet de vérifier qu'une date n'est pas postérieure à une date de référence. </p>
</div>

## Usage

Pour utiliser cette règle de validation, vous devez importer la fonction d'ordre supérieur `isNotAfterDateFn` depuis le package `@cnamts/synapse`.

<Source dark code={`
import { isNotAfterDateFn } from '@cnamts/synapse';
`} />

Vous devez ensuite faire appel à cette fonction en lui passant en paramètre la date de référence.

<Source dark code={`
const notAfterToday = isNotAfterDateFn('01/01/2022');
`} />

Vous pouvez ensuite utiliser la fonction retournée comme règle d'un champs de formulaire.

<Source dark code={`
<script setup lang="ts">
import { isNotAfterDateFn } from '@cnamts/synapse';
import { VTextField } from 'vuetify/components';

const notAfter = isNotAfterDateFn('01/01/2022');

</script>

<template>
	<VTextField
		:rules="[notAfter]"
		label="Date"
	/>
</template>
`} />

## API

<Source dark code={`

isNotAfterDateFn(
	date: string,
	errorMessages?: {
		default: (date: string) => string;
	}
): (value: string) => true | string;

`} />

### Arguments

- `date` : chaîne de caractères représentant la date de référence. La date doit être au format `JJ/MM/AAAA`.
- `errorMessages` : objet optionnel permettant de personnaliser les messages d'erreur. Les clés disponibles sont :
	- `default` : message d'erreur par défaut. Vous pouvez utiliser la variable `{{ date }}` pour afficher la date de référence.

### Valeurs de retour

Retourne une fonction de validation qui vérifie si la date passée en paramètre n'est pas postérieure à la date de référence.

## Exemples

<Canvas of={IsNotAfterDateStories.Default} />
