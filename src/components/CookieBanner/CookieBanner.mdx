import {Controls, Canvas, Meta, Source} from '@storybook/blocks';
import * as CookieBannerStories from './CookieBanner.stories';

<Meta of={CookieBannerStories} />

# CookieBanner

Le composant `CookieBanner` est utilisé pour afficher une bannière de consentement pour les cookies.

<Canvas of={CookieBannerStories.Default} />

# API

<Controls of={CookieBannerStories.Default} />

## Sans selection des cookies

Vous pouvez omettre la props `items`, dans ce cas la l'interface de sélection des categories de cookies ne sera pas affichée.
Vous pourrez toujours afficher utiliser l’événement `customize` pour afficher une interface de sélection des cookies personnalisée.

<Canvas
	of={CookieBannerStories.WithoutCookiesItems}
	source={{
		language: 'html',
		format: 'dedent',
		code: `
		<script lang="ts" setup>
			import { CookieBanner } from '@cnamts/synapse'

			const openBanner = ref(true)
		</script>

		<template>
			<CookieBanner
				v-model="openBanner"
				@customize="openDialog = true"
			/>
		</template>
		`
	}}
/>

## Description de la bannière

Vous pouvez personnaliser le texte de la bannière en utilisant le slot par défaut

<Canvas
	of={CookieBannerStories.DescriptionSlot}
	source={{
		language: 'html',
		format: 'dedent',
		code: `
		<script lang="ts" setup>
			import { CookieBanner } from '@cnamts/synapse'

			const openBanner = ref(true)
		</script>

		<template>
			<CookieBanner
				v-model="openBanner"
				@customize="openDialog = true"
			>
				<p><b>Custom</b> description</p>
			</CookieBanner>
		</template>
		`
	}}
/>


## Personnalisation des composants Vuetify

Vous pouvez personnaliser les composants Vuetify utilisés par le composant `CookieBanner` en utilisant la props `vuetifyOptions`.


<Canvas
	of={CookieBannerStories.Customization}
	source={{
		language: 'html',
		format: 'dedent',
		code: `
		<script lang="ts" setup>
			import { CookieBanner } from '@cnamts/synapse'

			const openBanner = ref(true)

			const items = {
				essentials: [
					{
						name: 'session',
						description: 'Sauvegarde la session pour rester connecté.',
						conservation: '20 heures',
					},
					{
						name: 'cookie_policy',
						description: 'Sauvegarde les préférences de cookies.',
						conservation: '1 an',
					},
				],
				functional: [
					{
						name: 'contrast',
						description: 'Sauvegarde la personnalisation de l’affichage.',
						conservation: '1 an',
					},
				],
				analytics: [
					{
						name: 'user_id',
						description: 'Sauvegarde l’identifiant unique de visiteur.',
						conservation: '6 mois',
					},
				],
			}

			const options = {
				banner: {
					color: '#ced9eb',
				},
				customizeBtn: {
					variant: 'text',
					color: 'orange',
				},
				rejectBtn: {
					variant: 'outlined',
				},
				acceptBtn: {
					variant: 'outlined',
				},
			}

			function onSubmit(e) {
				console.log('Les cookies suivants ont été sélectionnés :', e)
				alert('Vos préférences ont été enregistrées.')

				// Charger les cookies non essentiels
			}
		</script>

		<template>
			<CookieBanner
				v-model="openBanner"
				:vuetifyOptions="options"
			/>
		</template>
		`
	}}
/>