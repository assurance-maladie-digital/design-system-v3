import {Canvas, Meta, Controls, Source} from '@storybook/blocks';
import * as PasswordFieldStories from './PasswordField.stories';
import PasswordField from './PasswordField.vue';

<Meta title="Composants/Formulaires/PasswordField" component={PasswordField}/>

# PasswordField

Le composant `PasswordField` est utilisé pour afficher un champ de saisie de mot de passe et gérer sa validation.
Il permet également d’afficher ou de masquer le contenu du champ à l’aide d’une icône.

<Canvas story={{height: '150px'}} of={PasswordFieldStories.Default}/>

# API

<Controls of={PasswordFieldStories.Default}/>

## Utilisation de base

    <Source
        dark
        code={`
<script setup lang="ts">
    import { ref } from 'vue'
    import { PasswordField } from '@cnamts/synapse'

    const password = ref('')
    const passwordFieldRef = ref() // Référence Vue pour accéder au composant enfant

    function handleSubmit() {
    // Appeler la méthode exposée validateOnSubmit via la référence
    const isValid = passwordFieldRef.value?.validateOnSubmit()
    if (!isValid) {
    alert('Veuillez corriger les erreurs avant de soumettre.')
} else {
    alert('Formulaire soumis avec succès !')
}
}
</script>

    <template>
      <form @submit.prevent="handleSubmit">
        <PasswordField
          ref="passwordFieldRef"
          v-model="password"
          outlined
          :is-validate-on-blur="true"
        />
        <button type="submit">Soumettre</button>
      </form>
    </template>
`}
/>

## Gestion de la validation

### Validation par défaut

- **required** : Si `true`, le champ est obligatoire et affiche une erreur si le champ est vide.
- **isValidateOnBlur** : Si `true`, la validation se déclenche automatiquement lors du blur (perte de focus).

### Règles de validation personnalisées (props `customRules`)

Vous pouvez définir des règles de validation personnalisées sous forme de tableau d’objets.

Pour savoir comment utiliser les règles personnalisées, veuillez consulter la section [Comment utiliser les rules](/docs/guide-du-dev-comment-utiliser-les-rules--docs).




